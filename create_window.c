//
// Created by Aritra on 05/06/2024.
//

#include <stdio.h>
#include <Windows.h>

LRESULT CALLBACK WindowProcedure(HWND hWnd, UINT msg, WPARAM wp, LPARAM lp){
    switch (msg) {
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProcW(hWnd, msg, wp, lp);
    }
}

int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR args, int nShowCmd){

    WNDCLASSW wc = { 0 };

    wc.hbrBackground = (HBRUSH) COLOR_WINDOW + 1;// + 1 for black window else white
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hInstance = hInst;
    wc.lpszClassName = L"myWindowClass";
    wc.lpfnWndProc = WindowProcedure;

    // For debugging
    if (!RegisterClassW(&wc)){
        printf("[-] Failed registering class ErrCode: %ld", GetLastError());
    }

    CreateWindowW(L"myWindowClass", L"Title of my window", WS_OVERLAPPEDWINDOW | WS_VISIBLE, 100, 100, 500, 500, NULL, NULL, hInst, NULL);

    MSG msg = { 0 };

    while (GetMessage(&msg, NULL, 0, 0)){
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    // End of WinMain()

    return 0;
}
